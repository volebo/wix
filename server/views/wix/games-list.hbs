{{!--

Wix Integration service for volebo.net

Copyright (C) 2016  Volebo <volebo.net@gmail.com>
Copyright (C) 2016  Koryukov Maksim <maxkoryukov@gmail.com>

This program is free software: you can redistribute it and/or modify
it under the terms of the GNU General Public License as published by
the Free Software Foundation, either version 3 of the License, or
(at your option) any later version.

This program is distributed in the hope that it will be useful,
but WITHOUT ANY WARRANTY; without even the implied warranty of
MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
GNU General Public License for more details.

You should have received a copy of the GNU General Public License
along with this program.  If not, see <http://www.gnu.org/licenses/>.

--}}

<style wix-style>
	.vlb-widget {
		max-width: {{width}}px;
	}

	.game-list .game:nth-child(even) {
		background-color: rgba(0,0,0, 0.05);
	}
	.game-list .game:nth-child(odd) {
		background-color: rgba(0,0,0, 0.1);
	}

	.game-list {
		font-family: ubuntu;
	}

	.team-name-home {
		\{{style.homeTeamFont}};
		color: \{{style.homeTeamColor}};
	}
</style>

<section class="vlb-widget">{{~!-- --~}}
	<ul class="game-list">
	{{~#each games as |game|~}}
		<li class="game">{{~!-- --~}}
			<time datetime="">
				{{~formatDate game.dateFrom day="2-digit" month="2-digit" year="numeric" hour="2-digit" minute="2-digit"~}}
			</time>{{~!-- --~}}
			<span class="teams"> {{!-- --~}}
				<strong class="team-name team-name-home" {{#if game.homeTeam.fullName}}title="{{game.homeTeam.fullName}}" {{/if}}>{{game.homeTeam.shortName}}</strong> : {{!-- --~}}
				<strong class="team-name" {{#if game.awayTeam.fullName}}title="{{game.awayTeam.fullName}}" {{/if}}>{{game.awayTeam.shortName}}</strong>{{!-- --~}}
			</span> {{!-- --~}}
			<span class="gym">[<span class="gym-name">{{game.gym.name}}</span>] </span>{{~!-- --~}}
			{{__ "referee.label"}}<span class="referee-name" {{~#if game.referee.longName~}}title="{{game.referee.longName}}" {{/if}}>
			{{~#if game.referee.shortName~}}
				{{game.referee.shortName}}
			{{~^~}}
				???
			{{~/if~}}
			</span>{{!-- --~}}
		</li>
	{{~/each~}}
	</ul>{{~!-- --~}}

{{#if debug}}
<section>
	<h2>DEBUG</h2>

	<p><i>Width:</i> <strong>{{width}}</strong></p>
	<p><i>Instance:</i> <strong>{{instance}}</strong></p>

	<p><i>Locale:</i> <strong>{{locale}}</strong></p>
	{{intl.locales}}
	<hr />
	<h3>Instance Data</h3>

	<p><i>Instance ID:</i> <strong>{{data.instanceId}}</strong></p>
	<p><i>UID:</i> <strong>{{data.uid}}</strong></p>
	<p><i>AID:</i> <strong>{{data.aid}}</strong></p>

	{{#each data.ext as |key|}}
		{{key}}
	{{/each}}
	<hr />
	<h3>System</h3>
	<p><i>HTTPS</i> <strong>{{https}}</strong></p>
</section>
{{/if}}

</section>


<script type="text/javascript">

	Wix.addEventListener(Wix.Events.SETTINGS_UPDATED, onSettingsUpdate);

	function onSettingsUpdate(update) {
{{#if debug}}
		console.debug(JSON.stringify(update));
{{/if}}
		Wix.setHeight(document.documentElement.scrollHeight);
	}

</script>
